<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/paper-menu-button/paper-menu-button.html">
<link rel="import" href="../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../bower_components/paper-listbox/paper-listbox.html">
<link rel="import" href="../../bower_components/paper-item/paper-item.html">
<link rel="import" href="../../bower_components/web-animations-js/web-animations-next-lite.min.html">

<dom-module id="hb-doc-menu">
  <template>
    <style include="hb-page-layout-shared-styles"></style>
    <style>
        paper-item {
            cursor: default;
        }
    </style>
     <paper-menu-button hidden$="[[!canShow(doc)]]" dynamic-align close-on-activate>
        <paper-icon-button icon="hb:more-vert" slot="dropdown-trigger"></paper-icon-button>
        <paper-listbox slot="dropdown-content">
          <paper-item on-tap="_editDocument">Edit document</paper-item>
          <paper-item on-tap="_deleteDocument">Delete document</paper-item>
          <paper-item on-tap="_settings">Settings</paper-item>
        </paper-listbox>
      </paper-menu-button>
  </template>
    <script>
    /**
    * @customElement
    * @polymer
    */
    class HbDocMenu extends Polymer.Element {
        static get is() { return 'hb-doc-menu'; }
        
        static get properties() {
            return {
                doc: {                
                    type: Object
                }
            };
        }

        canShow(doc) {
            // return true if the author.doc is the current user
            // or if the current user isAuthor in doc.permissions
            return true;
        }

        _editDocument(event) {
            this.dispatchEvent(new CustomEvent("edit-document"));
        }

        _deleteDocument(event) {
            this.dispatchEvent(new CustomEvent("delete-document"));
        }

        _settings(event) {
            this.dispatchEvent(new CustomEvent("show-document-settings"));
        }
    }

    window.customElements.define(HbDocMenu.is, HbDocMenu);
    </script>
</dom-module>
