<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/paper-toast/paper-toast.html">
<link rel="import" href="../hb-app/EventMap.html">
<link rel="import" href="../hb-styles/hb-styles.html">
<script>
   /**
    * @polymer
    * @demo ../src/hb-app/demo/SystemFeedback.html
    */
    class HbSystemError extends EventMap(Polymer.Element) {
        static get is() { return 'hb-system-error'; }
 
        static get properties() {
            return {
                /**.
                 */
                error: {
                    type: Object,
                    value: {}
                    /* {
                        name,
                        message,
                        stack
                    } */
                }
            };
        }
 
        static get events() {
            return {
                "system-error-changed": {
                    listenAt: "parent",
                    handler: "_systemErrorChanged"
                }
            };
        }
 
        _systemErrorChanged(event) {
            if (this.error) {
                alert(`
                    There was a system error: ${this.error.message}
                    The page will reload.
                    `);
                this.reload();
            }
        }

        reload() {
            window.location.reload(true);
        }
    }
 
    window.customElements.define(HbSystemError.is, HbSystemError);
</script>
 